name: Xcode - Build and Analyze

on: [push, pull_request]

jobs:
  build:
    runs-on: macos-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Xcode
      uses: maxim-lobanov/setup-xcode@v1
      with:
        xcode-version: '16.0'  # Asegúrese de que esta versión sea compatible con su proyecto

    - name: Build with xcodebuild
      run: |
        xcodebuild -project 'Mis Mangas.xcodeproj' -scheme 'Mis Mangas' build

    - name: JSON validation
      run: |
        ruby -e "require 'json'; begin; data = JSON.parse(File.read('path/to/your/json/file.json')); rescue JSON::ParserError => e; puts 'JSON parsing error: #{e.message}'; end"
